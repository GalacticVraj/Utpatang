{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/equipment">Equipment</a></li>
            <li class="breadcrumb-item active">{{ equipment.name }} Maintenance</li>
        </ol>
    </nav>

    <h1>Maintenance History: {{ equipment.name }}</h1>
    <p class="text-muted">Serial: {{ equipment.serial_number }} | Location: {{ equipment.location }}</p>

    <div class="card shadow-sm mt-3">
        <div class="card-body">
            <table class="table table-hover">
                <thead class="table-light">
                    <tr>
                        <th>Subject</th>
                        <th>Type</th>
                        <th>Stage</th>
                        <th>Team</th>
                        <th>Technician</th>
                        <th>Scheduled Date</th>
                        <th>Created At</th>
                    </tr>
                </thead>
                <tbody>
                    {% for req in requests %}
                    <tr>
                        <td>{{ req.subject }}</td>
                        <td>
                            <span
                                class="badge {% if req.request_type == 'Preventive' %}bg-info{% else %}bg-warning text-dark{% endif %}">
                                {{ req.request_type }}
                            </span>
                        </td>
                        <td>
                            <span
                                class="badge {% if req.stage == 'Repaired' %}bg-success{% elif req.stage == 'Scrap' %}bg-danger{% else %}bg-primary{% endif %}">
                                {{ req.stage }}
                            </span>
                        </td>
                        <td>{{ req.team }}</td>
                        <td>{{ req.technician }}</td>
                        <td>{{ req.scheduled_date or '-' }}</td>
                        <td>{{ req.created_at }}</td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="7" class="text-center py-4">No maintenance requests found for this equipment.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}